{"version":3,"sources":["../node_modules/node-fetch/lib/index.mjs","../src/utils.ts","../src/command.ts","../src/file-command.ts","../src/core.ts","../dist-src/index.js","../node_modules/before-after-hook/lib/register.js","../node_modules/before-after-hook/lib/add.js","../node_modules/before-after-hook/lib/remove.js","../node_modules/before-after-hook/index.js","../node_modules/@octokit/endpoint/node_modules/is-plain-object/dist/is-plain-object.mjs","../dist-src/util/lowercase-keys.js","../dist-src/util/merge-deep.js","../dist-src/util/remove-undefined-properties.js","../dist-src/merge.js","../dist-src/util/add-query-parameters.js","../dist-src/util/extract-url-variable-names.js","../dist-src/util/omit.js","../dist-src/util/url-template.js","../dist-src/parse.js","../dist-src/endpoint-with-defaults.js","../dist-src/with-defaults.js","../dist-src/version.js","../dist-src/defaults.js","../node_modules/@octokit/request/node_modules/is-plain-object/dist/is-plain-object.mjs","../node_modules/deprecation/dist-web/index.js","../node_modules/wrappy/wrappy.js","../node_modules/once/once.js","../dist-src/get-buffer-response.js","../dist-src/fetch-wrapper.js","../dist-src/error.js","../dist-src/graphql.js","../dist-src/auth.js","../dist-src/with-authorization-prefix.js","../dist-src/hook.js","chart.js","distance.js","pace.js","goal.js","time.js","index.js"],"names":["fetch","Readable","Stream","BUFFER","Symbol","TYPE","Blob","constructor","blobParts","arguments","options","buffers","size","a","length","Number","i","element","buffer","Buffer","ArrayBuffer","isView","from","byteOffset","byteLength","String","push","concat","type","undefined","toLowerCase","test","text","Promise","resolve","toString","arrayBuffer","buf","ab","slice","stream","readable","_read","start","end","relativeStart","relativeEnd","Math","max","min","span","slicedBuffer","blob","FetchError","message","systemError","Error","call","code","errno","captureStackTrace","convert","Object","defineProperties","prototype","enumerable","defineProperty","toStringTag","value","writable","configurable","create","name","require","e","INTERNALS","PassThrough","Body","body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBlob","isBuffer","disturbed","error","on","err","url","consumeBody","_this4","reject","TypeError","alloc","accum","accumBytes","abort","resTimeout","setTimeout","chunk","clearTimeout","convertBody","headers","ct","get","charset","res","str","exec","pop","obj","append","delete","getAll","has","set","sort","clone","instance","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","writeToStream","dest","write","then","assign","json","_this2","JSON","parse","textConverted","_this3","mixIn","proto","getOwnPropertyNames","desc","getOwnPropertyDescriptor","global","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","map","key","MAP","Headers","init","rawHeaders","raw","headerNames","keys","headerName","method","iterator","pairs","pair","Array","join","forEach","callback","thisArg","getHeaders","_pairs$i","createHeadersIterator","values","kind","k","entries","INTERNAL","target","HeadersIteratorPrototype","index","setPrototypeOf","next","getPrototypeOf","_INTERNAL","done","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","createHeadersLenient","isArray","val","INTERNALS$1","STATUS_CODES","http","Response","opts","status","contentType","statusText","counter","ok","redirected","INTERNALS$2","parse_url","Url","format_url","format","streamDestructionSupported","isRequest","input","isAbortSignal","signal","Request","parsedURL","href","toUpperCase","inputBody","redirect","follow","compress","agent","getNodeRequestOptions","request","protocol","hostname","contentLengthValue","totalBytes","AbortError","PassThrough$1","resolve_url","send","https","response","destroy","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","once","socket","isRedirect","statusCode","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","zlib","Z_SYNC_FLUSH","finishFlush","createGunzip","createBrotliDecompress","createInflate","createInflateRaw","isObject","o","isPlainObject","ctor","prot","hasOwnProperty","Deprecation","getBuffer","graphql","generate","percent","syms","frac","floor","barsFull","substring","repeat","semi","padEnd","module","exports","distance","meters","toFixed","d","pace","movingTime","pacePH","goal","current","total","parseFloat","time","minutes","fs","core","Octokit","generateBarChart","goalPercentage","RUNNING_GOAL","STRAVA_ACCESS_TOKEN","STRAVA_CLIENT_ID","STRAVA_CLIENT_SECRET","STRAVA_REFRESH_TOKEN","STRAVA_USER_ID","GITHUB_TOKEN","GITHUB_REPOSITORY","process","env","cacheFile","apiBase","octokit","auth","owner","split","repo","transformData","exercise","percentage","count","moving_time","elevation","elevation_gain","chart","updateReadme","path","getInput","getReadme","console","log","setFailed","getStravaToken","cache","stravaAccessToken","stravaRefreshToken","jsonStr","readFileSync","c","data","stringify","grant_type","client_id","client_secret","refresh_token","access_token","writeFileSync","getStravaStats","API","ytd_run_totals","main","stats","widget"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n",null,null,null,null,"export function getUserAgent() {\n    if (typeof navigator === \"object\" && \"userAgent\" in navigator) {\n        return navigator.userAgent;\n    }\n    if (typeof process === \"object\" && \"version\" in process) {\n        return `Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`;\n    }\n    return \"<environment undetectable>\";\n}\n","module.exports = register\n\nfunction register (state, name, method, options) {\n  if (typeof method !== 'function') {\n    throw new Error('method for before hook must be a function')\n  }\n\n  if (!options) {\n    options = {}\n  }\n\n  if (Array.isArray(name)) {\n    return name.reverse().reduce(function (callback, name) {\n      return register.bind(null, state, name, callback, options)\n    }, method)()\n  }\n\n  return Promise.resolve()\n    .then(function () {\n      if (!state.registry[name]) {\n        return method(options)\n      }\n\n      return (state.registry[name]).reduce(function (method, registered) {\n        return registered.hook.bind(null, method, options)\n      }, method)()\n    })\n}\n","module.exports = addHook\n\nfunction addHook (state, kind, name, hook) {\n  var orig = hook\n  if (!state.registry[name]) {\n    state.registry[name] = []\n  }\n\n  if (kind === 'before') {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(orig.bind(null, options))\n        .then(method.bind(null, options))\n    }\n  }\n\n  if (kind === 'after') {\n    hook = function (method, options) {\n      var result\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .then(function (result_) {\n          result = result_\n          return orig(result, options)\n        })\n        .then(function () {\n          return result\n        })\n    }\n  }\n\n  if (kind === 'error') {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .catch(function (error) {\n          return orig(error, options)\n        })\n    }\n  }\n\n  state.registry[name].push({\n    hook: hook,\n    orig: orig\n  })\n}\n","module.exports = removeHook\n\nfunction removeHook (state, name, method) {\n  if (!state.registry[name]) {\n    return\n  }\n\n  var index = state.registry[name]\n    .map(function (registered) { return registered.orig })\n    .indexOf(method)\n\n  if (index === -1) {\n    return\n  }\n\n  state.registry[name].splice(index, 1)\n}\n","var register = require('./lib/register')\nvar addHook = require('./lib/add')\nvar removeHook = require('./lib/remove')\n\n// bind with array of arguments: https://stackoverflow.com/a/21792913\nvar bind = Function.bind\nvar bindable = bind.bind(bind)\n\nfunction bindApi (hook, state, name) {\n  var removeHookRef = bindable(removeHook, null).apply(null, name ? [state, name] : [state])\n  hook.api = { remove: removeHookRef }\n  hook.remove = removeHookRef\n\n  ;['before', 'error', 'after', 'wrap'].forEach(function (kind) {\n    var args = name ? [state, kind, name] : [state, kind]\n    hook[kind] = hook.api[kind] = bindable(addHook, null).apply(null, args)\n  })\n}\n\nfunction HookSingular () {\n  var singularHookName = 'h'\n  var singularHookState = {\n    registry: {}\n  }\n  var singularHook = register.bind(null, singularHookState, singularHookName)\n  bindApi(singularHook, singularHookState, singularHookName)\n  return singularHook\n}\n\nfunction HookCollection () {\n  var state = {\n    registry: {}\n  }\n\n  var hook = register.bind(null, state)\n  bindApi(hook, state)\n\n  return hook\n}\n\nvar collectionHookDeprecationMessageDisplayed = false\nfunction Hook () {\n  if (!collectionHookDeprecationMessageDisplayed) {\n    console.warn('[before-after-hook]: \"Hook()\" repurposing warning, use \"Hook.Collection()\". Read more: https://git.io/upgrade-before-after-hook-to-1.4')\n    collectionHookDeprecationMessageDisplayed = true\n  }\n  return HookCollection()\n}\n\nHook.Singular = HookSingular.bind()\nHook.Collection = HookCollection.bind()\n\nmodule.exports = Hook\n// expose constructors as a named property for TypeScript\nmodule.exports.Hook = Hook\nmodule.exports.Singular = Hook.Singular\nmodule.exports.Collection = Hook.Collection\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (ctor === undefined) return true;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexport { isPlainObject };\n","export function lowercaseKeys(object) {\n    if (!object) {\n        return {};\n    }\n    return Object.keys(object).reduce((newObj, key) => {\n        newObj[key.toLowerCase()] = object[key];\n        return newObj;\n    }, {});\n}\n","import { isPlainObject } from \"is-plain-object\";\nexport function mergeDeep(defaults, options) {\n    const result = Object.assign({}, defaults);\n    Object.keys(options).forEach((key) => {\n        if (isPlainObject(options[key])) {\n            if (!(key in defaults))\n                Object.assign(result, { [key]: options[key] });\n            else\n                result[key] = mergeDeep(defaults[key], options[key]);\n        }\n        else {\n            Object.assign(result, { [key]: options[key] });\n        }\n    });\n    return result;\n}\n","export function removeUndefinedProperties(obj) {\n    for (const key in obj) {\n        if (obj[key] === undefined) {\n            delete obj[key];\n        }\n    }\n    return obj;\n}\n","import { lowercaseKeys } from \"./util/lowercase-keys\";\nimport { mergeDeep } from \"./util/merge-deep\";\nimport { removeUndefinedProperties } from \"./util/remove-undefined-properties\";\nexport function merge(defaults, route, options) {\n    if (typeof route === \"string\") {\n        let [method, url] = route.split(\" \");\n        options = Object.assign(url ? { method, url } : { url: method }, options);\n    }\n    else {\n        options = Object.assign({}, route);\n    }\n    // lowercase header names before merging with defaults to avoid duplicates\n    options.headers = lowercaseKeys(options.headers);\n    // remove properties with undefined values before merging\n    removeUndefinedProperties(options);\n    removeUndefinedProperties(options.headers);\n    const mergedOptions = mergeDeep(defaults || {}, options);\n    // mediaType.previews arrays are merged, instead of overwritten\n    if (defaults && defaults.mediaType.previews.length) {\n        mergedOptions.mediaType.previews = defaults.mediaType.previews\n            .filter((preview) => !mergedOptions.mediaType.previews.includes(preview))\n            .concat(mergedOptions.mediaType.previews);\n    }\n    mergedOptions.mediaType.previews = mergedOptions.mediaType.previews.map((preview) => preview.replace(/-preview/, \"\"));\n    return mergedOptions;\n}\n","export function addQueryParameters(url, parameters) {\n    const separator = /\\?/.test(url) ? \"&\" : \"?\";\n    const names = Object.keys(parameters);\n    if (names.length === 0) {\n        return url;\n    }\n    return (url +\n        separator +\n        names\n            .map((name) => {\n            if (name === \"q\") {\n                return (\"q=\" + parameters.q.split(\"+\").map(encodeURIComponent).join(\"+\"));\n            }\n            return `${name}=${encodeURIComponent(parameters[name])}`;\n        })\n            .join(\"&\"));\n}\n","const urlVariableRegex = /\\{[^}]+\\}/g;\nfunction removeNonChars(variableName) {\n    return variableName.replace(/^\\W+|\\W+$/g, \"\").split(/,/);\n}\nexport function extractUrlVariableNames(url) {\n    const matches = url.match(urlVariableRegex);\n    if (!matches) {\n        return [];\n    }\n    return matches.map(removeNonChars).reduce((a, b) => a.concat(b), []);\n}\n","export function omit(object, keysToOmit) {\n    return Object.keys(object)\n        .filter((option) => !keysToOmit.includes(option))\n        .reduce((obj, key) => {\n        obj[key] = object[key];\n        return obj;\n    }, {});\n}\n","// Based on https://github.com/bramstein/url-template, licensed under BSD\n// TODO: create separate package.\n//\n// Copyright (c) 2012-2014, Bram Stein\n// All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions\n// are met:\n//  1. Redistributions of source code must retain the above copyright\n//     notice, this list of conditions and the following disclaimer.\n//  2. Redistributions in binary form must reproduce the above copyright\n//     notice, this list of conditions and the following disclaimer in the\n//     documentation and/or other materials provided with the distribution.\n//  3. The name of the author may not be used to endorse or promote products\n//     derived from this software without specific prior written permission.\n// THIS SOFTWARE IS PROVIDED BY THE AUTHOR \"AS IS\" AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO\n// EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n// INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n// BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n// EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n/* istanbul ignore file */\nfunction encodeReserved(str) {\n    return str\n        .split(/(%[0-9A-Fa-f]{2})/g)\n        .map(function (part) {\n        if (!/%[0-9A-Fa-f]/.test(part)) {\n            part = encodeURI(part).replace(/%5B/g, \"[\").replace(/%5D/g, \"]\");\n        }\n        return part;\n    })\n        .join(\"\");\n}\nfunction encodeUnreserved(str) {\n    return encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n        return \"%\" + c.charCodeAt(0).toString(16).toUpperCase();\n    });\n}\nfunction encodeValue(operator, value, key) {\n    value =\n        operator === \"+\" || operator === \"#\"\n            ? encodeReserved(value)\n            : encodeUnreserved(value);\n    if (key) {\n        return encodeUnreserved(key) + \"=\" + value;\n    }\n    else {\n        return value;\n    }\n}\nfunction isDefined(value) {\n    return value !== undefined && value !== null;\n}\nfunction isKeyOperator(operator) {\n    return operator === \";\" || operator === \"&\" || operator === \"?\";\n}\nfunction getValues(context, operator, key, modifier) {\n    var value = context[key], result = [];\n    if (isDefined(value) && value !== \"\") {\n        if (typeof value === \"string\" ||\n            typeof value === \"number\" ||\n            typeof value === \"boolean\") {\n            value = value.toString();\n            if (modifier && modifier !== \"*\") {\n                value = value.substring(0, parseInt(modifier, 10));\n            }\n            result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : \"\"));\n        }\n        else {\n            if (modifier === \"*\") {\n                if (Array.isArray(value)) {\n                    value.filter(isDefined).forEach(function (value) {\n                        result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : \"\"));\n                    });\n                }\n                else {\n                    Object.keys(value).forEach(function (k) {\n                        if (isDefined(value[k])) {\n                            result.push(encodeValue(operator, value[k], k));\n                        }\n                    });\n                }\n            }\n            else {\n                const tmp = [];\n                if (Array.isArray(value)) {\n                    value.filter(isDefined).forEach(function (value) {\n                        tmp.push(encodeValue(operator, value));\n                    });\n                }\n                else {\n                    Object.keys(value).forEach(function (k) {\n                        if (isDefined(value[k])) {\n                            tmp.push(encodeUnreserved(k));\n                            tmp.push(encodeValue(operator, value[k].toString()));\n                        }\n                    });\n                }\n                if (isKeyOperator(operator)) {\n                    result.push(encodeUnreserved(key) + \"=\" + tmp.join(\",\"));\n                }\n                else if (tmp.length !== 0) {\n                    result.push(tmp.join(\",\"));\n                }\n            }\n        }\n    }\n    else {\n        if (operator === \";\") {\n            if (isDefined(value)) {\n                result.push(encodeUnreserved(key));\n            }\n        }\n        else if (value === \"\" && (operator === \"&\" || operator === \"?\")) {\n            result.push(encodeUnreserved(key) + \"=\");\n        }\n        else if (value === \"\") {\n            result.push(\"\");\n        }\n    }\n    return result;\n}\nexport function parseUrl(template) {\n    return {\n        expand: expand.bind(null, template),\n    };\n}\nfunction expand(template, context) {\n    var operators = [\"+\", \"#\", \".\", \"/\", \";\", \"?\", \"&\"];\n    return template.replace(/\\{([^\\{\\}]+)\\}|([^\\{\\}]+)/g, function (_, expression, literal) {\n        if (expression) {\n            let operator = \"\";\n            const values = [];\n            if (operators.indexOf(expression.charAt(0)) !== -1) {\n                operator = expression.charAt(0);\n                expression = expression.substr(1);\n            }\n            expression.split(/,/g).forEach(function (variable) {\n                var tmp = /([^:\\*]*)(?::(\\d+)|(\\*))?/.exec(variable);\n                values.push(getValues(context, operator, tmp[1], tmp[2] || tmp[3]));\n            });\n            if (operator && operator !== \"+\") {\n                var separator = \",\";\n                if (operator === \"?\") {\n                    separator = \"&\";\n                }\n                else if (operator !== \"#\") {\n                    separator = operator;\n                }\n                return (values.length !== 0 ? operator : \"\") + values.join(separator);\n            }\n            else {\n                return values.join(\",\");\n            }\n        }\n        else {\n            return encodeReserved(literal);\n        }\n    });\n}\n","import { addQueryParameters } from \"./util/add-query-parameters\";\nimport { extractUrlVariableNames } from \"./util/extract-url-variable-names\";\nimport { omit } from \"./util/omit\";\nimport { parseUrl } from \"./util/url-template\";\nexport function parse(options) {\n    // https://fetch.spec.whatwg.org/#methods\n    let method = options.method.toUpperCase();\n    // replace :varname with {varname} to make it RFC 6570 compatible\n    let url = (options.url || \"/\").replace(/:([a-z]\\w+)/g, \"{$1}\");\n    let headers = Object.assign({}, options.headers);\n    let body;\n    let parameters = omit(options, [\n        \"method\",\n        \"baseUrl\",\n        \"url\",\n        \"headers\",\n        \"request\",\n        \"mediaType\",\n    ]);\n    // extract variable names from URL to calculate remaining variables later\n    const urlVariableNames = extractUrlVariableNames(url);\n    url = parseUrl(url).expand(parameters);\n    if (!/^http/.test(url)) {\n        url = options.baseUrl + url;\n    }\n    const omittedParameters = Object.keys(options)\n        .filter((option) => urlVariableNames.includes(option))\n        .concat(\"baseUrl\");\n    const remainingParameters = omit(parameters, omittedParameters);\n    const isBinaryRequest = /application\\/octet-stream/i.test(headers.accept);\n    if (!isBinaryRequest) {\n        if (options.mediaType.format) {\n            // e.g. application/vnd.github.v3+json => application/vnd.github.v3.raw\n            headers.accept = headers.accept\n                .split(/,/)\n                .map((preview) => preview.replace(/application\\/vnd(\\.\\w+)(\\.v3)?(\\.\\w+)?(\\+json)?$/, `application/vnd$1$2.${options.mediaType.format}`))\n                .join(\",\");\n        }\n        if (options.mediaType.previews.length) {\n            const previewsFromAcceptHeader = headers.accept.match(/[\\w-]+(?=-preview)/g) || [];\n            headers.accept = previewsFromAcceptHeader\n                .concat(options.mediaType.previews)\n                .map((preview) => {\n                const format = options.mediaType.format\n                    ? `.${options.mediaType.format}`\n                    : \"+json\";\n                return `application/vnd.github.${preview}-preview${format}`;\n            })\n                .join(\",\");\n        }\n    }\n    // for GET/HEAD requests, set URL query parameters from remaining parameters\n    // for PATCH/POST/PUT/DELETE requests, set request body from remaining parameters\n    if ([\"GET\", \"HEAD\"].includes(method)) {\n        url = addQueryParameters(url, remainingParameters);\n    }\n    else {\n        if (\"data\" in remainingParameters) {\n            body = remainingParameters.data;\n        }\n        else {\n            if (Object.keys(remainingParameters).length) {\n                body = remainingParameters;\n            }\n            else {\n                headers[\"content-length\"] = 0;\n            }\n        }\n    }\n    // default content-type for JSON if body is set\n    if (!headers[\"content-type\"] && typeof body !== \"undefined\") {\n        headers[\"content-type\"] = \"application/json; charset=utf-8\";\n    }\n    // GitHub expects 'content-length: 0' header for PUT/PATCH requests without body.\n    // fetch does not allow to set `content-length` header, but we can set body to an empty string\n    if ([\"PATCH\", \"PUT\"].includes(method) && typeof body === \"undefined\") {\n        body = \"\";\n    }\n    // Only return body/request keys if present\n    return Object.assign({ method, url, headers }, typeof body !== \"undefined\" ? { body } : null, options.request ? { request: options.request } : null);\n}\n","import { merge } from \"./merge\";\nimport { parse } from \"./parse\";\nexport function endpointWithDefaults(defaults, route, options) {\n    return parse(merge(defaults, route, options));\n}\n","import { endpointWithDefaults } from \"./endpoint-with-defaults\";\nimport { merge } from \"./merge\";\nimport { parse } from \"./parse\";\nexport function withDefaults(oldDefaults, newDefaults) {\n    const DEFAULTS = merge(oldDefaults, newDefaults);\n    const endpoint = endpointWithDefaults.bind(null, DEFAULTS);\n    return Object.assign(endpoint, {\n        DEFAULTS,\n        defaults: withDefaults.bind(null, DEFAULTS),\n        merge: merge.bind(null, DEFAULTS),\n        parse,\n    });\n}\n","export const VERSION = \"6.0.9\";\n","import { getUserAgent } from \"universal-user-agent\";\nimport { VERSION } from \"./version\";\nconst userAgent = `octokit-endpoint.js/${VERSION} ${getUserAgent()}`;\n// DEFAULTS has all properties set that EndpointOptions has, except url.\n// So we use RequestParameters and add method as additional required property.\nexport const DEFAULTS = {\n    method: \"GET\",\n    baseUrl: \"https://api.github.com\",\n    headers: {\n        accept: \"application/vnd.github.v3+json\",\n        \"user-agent\": userAgent,\n    },\n    mediaType: {\n        format: \"\",\n        previews: [],\n    },\n};\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (ctor === undefined) return true;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexport { isPlainObject };\n","class Deprecation extends Error {\n  constructor(message) {\n    super(message); // Maintains proper stack trace (only available on V8)\n\n    /* istanbul ignore next */\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n\n    this.name = 'Deprecation';\n  }\n\n}\n\nexport { Deprecation };\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","export default function getBufferResponse(response) {\n    return response.arrayBuffer();\n}\n","import { isPlainObject } from \"is-plain-object\";\nimport nodeFetch from \"node-fetch\";\nimport { RequestError } from \"@octokit/request-error\";\nimport getBuffer from \"./get-buffer-response\";\nexport default function fetchWrapper(requestOptions) {\n    if (isPlainObject(requestOptions.body) ||\n        Array.isArray(requestOptions.body)) {\n        requestOptions.body = JSON.stringify(requestOptions.body);\n    }\n    let headers = {};\n    let status;\n    let url;\n    const fetch = (requestOptions.request && requestOptions.request.fetch) || nodeFetch;\n    return fetch(requestOptions.url, Object.assign({\n        method: requestOptions.method,\n        body: requestOptions.body,\n        headers: requestOptions.headers,\n        redirect: requestOptions.redirect,\n    }, requestOptions.request))\n        .then((response) => {\n        url = response.url;\n        status = response.status;\n        for (const keyAndValue of response.headers) {\n            headers[keyAndValue[0]] = keyAndValue[1];\n        }\n        if (status === 204 || status === 205) {\n            return;\n        }\n        // GitHub API returns 200 for HEAD requests\n        if (requestOptions.method === \"HEAD\") {\n            if (status < 400) {\n                return;\n            }\n            throw new RequestError(response.statusText, status, {\n                headers,\n                request: requestOptions,\n            });\n        }\n        if (status === 304) {\n            throw new RequestError(\"Not modified\", status, {\n                headers,\n                request: requestOptions,\n            });\n        }\n        if (status >= 400) {\n            return response\n                .text()\n                .then((message) => {\n                const error = new RequestError(message, status, {\n                    headers,\n                    request: requestOptions,\n                });\n                try {\n                    let responseBody = JSON.parse(error.message);\n                    Object.assign(error, responseBody);\n                    let errors = responseBody.errors;\n                    // Assumption `errors` would always be in Array format\n                    error.message =\n                        error.message + \": \" + errors.map(JSON.stringify).join(\", \");\n                }\n                catch (e) {\n                    // ignore, see octokit/rest.js#684\n                }\n                throw error;\n            });\n        }\n        const contentType = response.headers.get(\"content-type\");\n        if (/application\\/json/.test(contentType)) {\n            return response.json();\n        }\n        if (!contentType || /^text\\/|charset=utf-8$/.test(contentType)) {\n            return response.text();\n        }\n        return getBuffer(response);\n    })\n        .then((data) => {\n        return {\n            status,\n            url,\n            headers,\n            data,\n        };\n    })\n        .catch((error) => {\n        if (error instanceof RequestError) {\n            throw error;\n        }\n        throw new RequestError(error.message, 500, {\n            headers,\n            request: requestOptions,\n        });\n    });\n}\n","export class GraphqlError extends Error {\n    constructor(request, response) {\n        const message = response.data.errors[0].message;\n        super(message);\n        Object.assign(this, response.data);\n        Object.assign(this, { headers: response.headers });\n        this.name = \"GraphqlError\";\n        this.request = request;\n        // Maintains proper stack trace (only available on V8)\n        /* istanbul ignore next */\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n","import { GraphqlError } from \"./error\";\nconst NON_VARIABLE_OPTIONS = [\n    \"method\",\n    \"baseUrl\",\n    \"url\",\n    \"headers\",\n    \"request\",\n    \"query\",\n    \"mediaType\",\n];\nconst GHES_V3_SUFFIX_REGEX = /\\/api\\/v3\\/?$/;\nexport function graphql(request, query, options) {\n    if (typeof query === \"string\" && options && \"query\" in options) {\n        return Promise.reject(new Error(`[@octokit/graphql] \"query\" cannot be used as variable name`));\n    }\n    const parsedOptions = typeof query === \"string\" ? Object.assign({ query }, options) : query;\n    const requestOptions = Object.keys(parsedOptions).reduce((result, key) => {\n        if (NON_VARIABLE_OPTIONS.includes(key)) {\n            result[key] = parsedOptions[key];\n            return result;\n        }\n        if (!result.variables) {\n            result.variables = {};\n        }\n        result.variables[key] = parsedOptions[key];\n        return result;\n    }, {});\n    // workaround for GitHub Enterprise baseUrl set with /api/v3 suffix\n    // https://github.com/octokit/auth-app.js/issues/111#issuecomment-657610451\n    const baseUrl = parsedOptions.baseUrl || request.endpoint.DEFAULTS.baseUrl;\n    if (GHES_V3_SUFFIX_REGEX.test(baseUrl)) {\n        requestOptions.url = baseUrl.replace(GHES_V3_SUFFIX_REGEX, \"/api/graphql\");\n    }\n    return request(requestOptions).then((response) => {\n        if (response.data.errors) {\n            const headers = {};\n            for (const key of Object.keys(response.headers)) {\n                headers[key] = response.headers[key];\n            }\n            throw new GraphqlError(requestOptions, {\n                headers,\n                data: response.data,\n            });\n        }\n        return response.data.data;\n    });\n}\n","export async function auth(token) {\n    const tokenType = token.split(/\\./).length === 3\n        ? \"app\"\n        : /^v\\d+\\./.test(token)\n            ? \"installation\"\n            : \"oauth\";\n    return {\n        type: \"token\",\n        token: token,\n        tokenType\n    };\n}\n","/**\n * Prefix token for usage in the Authorization header\n *\n * @param token OAuth token or JSON Web Token\n */\nexport function withAuthorizationPrefix(token) {\n    if (token.split(/\\./).length === 3) {\n        return `bearer ${token}`;\n    }\n    return `token ${token}`;\n}\n","import { withAuthorizationPrefix } from \"./with-authorization-prefix\";\nexport async function hook(token, request, route, parameters) {\n    const endpoint = request.endpoint.merge(route, parameters);\n    endpoint.headers.authorization = withAuthorizationPrefix(token);\n    return request(endpoint);\n}\n","function generate(percent, size) {\n  const syms = '░▏▎▍▌▋▊▉█'\n\n  const frac = Math.floor((size * 8 * percent) / 100)\n  const barsFull = Math.floor(frac / 8)\n\n  if (barsFull >= size) {\n    return syms.substring(8, 9).repeat(size)\n  }\n\n  const semi = frac % 8\n\n  return [syms.substring(8, 9).repeat(barsFull), syms.substring(semi, semi + 1)]\n    .join('')\n    .padEnd(size, syms.substring(0, 1))\n}\n\nmodule.exports = generate\n","function distance(meters) {\n  return (meters * 0.001).toFixed(2)\n}\n\nmodule.exports = distance\n","const d = require('./distance')\n\nfunction pace(distance, movingTime) {\n  const pacePH = d((distance * 3600) / (movingTime || 1))\n  const p = pacePH.substring(0, pacePH.length - 3)\n\n  return `${p}/h`\n}\n\nmodule.exports = pace\n","function goal(current, total) {\n  return parseFloat(((current / total) * 100).toFixed(2))\n}\n\nmodule.exports = goal\n","function time(minutes) {\n  return `${(minutes / 3600).toFixed(2)}h`\n}\n\nmodule.exports = time\n","const fs = require('fs')\nconst fetch = require('node-fetch')\nconst core = require('@actions/core')\nconst { Octokit } = require('@octokit/core')\n\nconst generateBarChart = require('./chart')\nconst pace = require('./pace')\nconst distance = require('./distance')\nconst goalPercentage = require('./goal')\nconst time = require('./time')\n\nconst {\n  RUNNING_GOAL,\n  STRAVA_ACCESS_TOKEN,\n  STRAVA_CLIENT_ID,\n  STRAVA_CLIENT_SECRET,\n  STRAVA_REFRESH_TOKEN,\n  STRAVA_USER_ID,\n  GITHUB_TOKEN,\n  GITHUB_REPOSITORY,\n} = process.env\n\nconst goal = RUNNING_GOAL * 1000\nconst cacheFile = './../auth.json'\nconst apiBase = 'https://www.strava.com/'\nconst octokit = new Octokit({ auth: GITHUB_TOKEN })\nconst owner = GITHUB_REPOSITORY.split('/')[0]\nconst repo = GITHUB_REPOSITORY.split('/')[1]\n\nfunction transformData(exercise) {\n  const percentage = goalPercentage(exercise.distance, goal)\n\n  return {\n    count: exercise.count,\n    pace: pace(exercise.distance, exercise.moving_time),\n    distance: distance(exercise.distance),\n    time: time(exercise.moving_time),\n    elevation: exercise.elevation_gain,\n    goal: percentage,\n    chart: generateBarChart(percentage, 25),\n  }\n}\n\nasync function updateReadme() {\n  try {\n    const path = core.getInput('path')\n    const getReadme = await octokit.request(\n      'GET /repos/{owner}/{repo}/contents/{path}',\n      {\n        owner,\n        repo,\n        path,\n      },\n    )\n    // const { sha } = getReadme.data\n\n    console.log('README: ', getReadme)\n    // const data = core.getInput('customReadmeFile')\n\n    // await octokit.request('PUT /repos/{owner}/{repo}/contents/{path}', {\n    //   owner,\n    //   repo,\n    //   path,\n    //   message: '(Automated) Update README.md',\n    //   content: Buffer.from(data, 'utf8').toString('base64'),\n    //   sha,\n    // })\n  } catch (error) {\n    core.setFailed(error.message)\n  }\n}\n\nasync function getStravaToken() {\n  const cache = {\n    stravaAccessToken: STRAVA_ACCESS_TOKEN,\n    stravaRefreshToken: STRAVA_REFRESH_TOKEN,\n  }\n\n  try {\n    const jsonStr = fs.readFileSync(cacheFile)\n    const c = JSON.parse(jsonStr)\n\n    Object.keys(c).forEach((key) => {\n      cache[key] = c[key]\n    })\n\n    const data = await fetch(`${apiBase}oauth/token`, {\n      method: 'post',\n      body: JSON.stringify({\n        grant_type: 'refresh_token',\n        client_id: STRAVA_CLIENT_ID,\n        client_secret: STRAVA_CLIENT_SECRET,\n        refresh_token: cache.stravaRefreshToken,\n      }),\n      headers: { 'Content-Type': 'application/json' },\n    }).then((res) => res.json())\n    cache.stravaAccessToken = data.access_token\n    cache.stravaRefreshToken = data.refresh_token\n\n    fs.writeFileSync(cacheFile, JSON.stringify(cache))\n  } catch (error) {\n    core.setFailed(error.message)\n  }\n\n  return cache.stravaAccessToken\n}\n\nasync function getStravaStats() {\n  const API = `${apiBase}api/v3/athletes/${STRAVA_USER_ID}/stats?access_token=${await getStravaToken()}`\n\n  const json = await fetch(API).then((data) => data.json())\n  return transformData(json.ytd_run_totals)\n}\n\nasync function main() {\n  const stats = await getStravaStats()\n  await updateReadme()\n  const widget = `Running   ${stats.distance}/120km   ${stats.chart}   ${stats.goal}%`\n  console.log(widget)\n}\n\nmain()\n"]}